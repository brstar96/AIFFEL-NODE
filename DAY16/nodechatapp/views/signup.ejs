<!doctype html>
<html lang="en">
	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

		<!-- Meta -->
		<meta name="description" content="Quick Chat App">
		<meta name="author" content="ParkerThemes">
		<link rel="shortcut icon" href="img/fav.png" />

		<!-- Title -->
		<title>Quick Chat App</title>


		<!-- *************
			************ Common Css Files *************
		************ -->
		<!-- Bootstrap css -->
		<link rel="stylesheet" href="css/bootstrap.min.css">
		
		<!-- Main css -->
		<link rel="stylesheet" href="css/main.css">


		<!-- *************
			************ Vendor Css Files *************
		************ -->

	</head>
	<body class="authentication">

		<!-- *************
			************ Login container start *************
		************* -->
		<div class="login-container">
			
			<!-- Row start -->
			<div class="row no-gutters h-100">
				<div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-12">
					<div class="login-about">
						<div class="slogan">
							<span>Design</span>
							<span>Made</span>
							<span>Simple.</span>
						</div>
						<div class="about-desc">
							Quick Chat is an intelligent and communications tool, built for teams. It provides an integrated platform that makes team communication easy and efficient.
						</div>
						<a href="index.html" class="know-more">Know More <img src="img/right-arrow.svg"></a>

					</div>
				</div>
				<div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-12">
					<div class="login-wrapper">
						<form id="signupForm">
							<div class="login-screen">
								<div class="login-body">
									<a href="index.html" class="login-logo">
										<img src="img/logo.svg" alt="Quick Chat">
									</a>
									<h6>Welcome to Quick Chat App,<br>Create your account.</h6>
									<div class="field-wrapper">
										<input type="email" id="email" autofocus>
										<div class="field-placeholder">Email ID</div>
									</div>
									<div class="field-wrapper">
										<input type="password" id="password">
										<div class="field-placeholder">Password</div>
									</div>
									<div class="field-wrapper mb-3">
										<input type="password" id="passwordConfirm">
										<div class="field-placeholder">Confirm Password</div>
									</div>
									<div class="field-wrapper mb-3">
										<input type="text" id="name">
										<div class="field-placeholder">Name</div>
									</div>
									
									<div class="actions">
										<button type="submit" class="btn btn-primary ml-auto">Sign Up</button>
									</div>
								</div>
								<div class="login-footer">
									<span class="additional-link">Have an account? <a href="login.html" class="btn btn-secondary">Login</a></span>
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
			<!-- Row end -->

		</div>
		<!-- *************
			************ Login container end *************
		************* -->

	<script src="js/jquery.min.js"></script>
	<script>
		// Form 태그의 submit 이벤트 발생 시 실행할 함수
		$('#signupForm').submit(function(){
			var email = $('#email').val();
			var password = $('#password').val();
			var name = $('#name').val();

			// 유효성 검사는 아래에 알아서 추가!!!!

			// 서버로 데이터 전송 (Ajax)
			var memberData = {
				'email': email,
				'password': password,
				'name': name, 
				'telephone': ''
			}
		

		$.ajax({
			url:"http://localhost:3000/api/member/signup",
			type:"POST",
			data:memberData,
			success:function(res){
				
				console.log(res + 'res.code:', res.code);

				// 정상 로그인 
				if(res.code == 200){
					//사용자 브라우저의 Local Storage영역에 서버에서 발급받은 토큰을 저장한다. 
					location.href ="/login"; // 로그인 완료 시 chat 페이지로 이동 
				}else{
					alert("에러발생");
				}
			}
			});

		return false; 
	});

	</script>

	</body>
</html>